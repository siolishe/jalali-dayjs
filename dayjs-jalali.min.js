!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t="undefined"!=typeof globalThis?globalThis:t||self)["jalali-dayjs"]=r()}(this,function(){"use strict";var t={toJalaali:function(t,r,e){"[object Date]"===Object.prototype.toString.call(t)&&(e=t.getDate(),r=t.getMonth()+1,t=t.getFullYear());return o(s(t,r,e))},toGregorian:function(t,r,e){return u(i(t,r,e))},isValidJalaaliDate:function(t,r,e){return t>=-61&&t<=3177&&r>=1&&r<=12&&e>=1&&e<=n(t,r)},isLeapJalaaliYear:e,jalaaliMonthLength:n,jalCal:a,j2d:i,d2j:o,g2d:s,d2g:u},r=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function e(t){return 0===function(t){var e,n,a,i,o,s=r.length,u=r[0];if(t<u||t>=r[s-1])throw new Error("Invalid Jalaali year "+t);for(o=1;o<s&&(e=r[o],n=e-u,!(t<e));o+=1)u=e;n-(i=t-u)<6&&(i=i-n+33*d(n+4,33));-1===(a=l(l(i+1,33)-1,4))&&(a=4);return a}(t)}function n(t,r){return r<=6?31:r<=11?30:e(t)?30:29}function a(t,e){var n,a,i,o,s,u,c=r.length,_=t+621,f=-14,h=r[0];if(t<h||t>=r[c-1])throw new Error("Invalid Jalaali year "+t);for(u=1;u<c&&(a=(n=r[u])-h,!(t<n));u+=1)f=f+8*d(a,33)+d(l(a,33),4),h=n;return f=f+8*d(s=t-h,33)+d(l(s,33)+3,4),4===l(a,33)&&a-s==4&&(f+=1),o=20+f-(d(_,4)-d(3*(d(_,100)+1),4)-150),e?{gy:_,march:o}:(a-s<6&&(s=s-a+33*d(a+4,33)),-1===(i=l(l(s+1,33)-1,4))&&(i=4),{leap:i,gy:_,march:o})}function i(t,r,e){var n=a(t,!0);return s(n.gy,3,n.march)+31*(r-1)-d(r,7)*(r-7)+e-1}function o(t){var r,e=u(t).gy,n=e-621,i=a(n,!1);if((r=t-s(e,3,i.march))>=0){if(r<=185)return{jy:n,jm:1+d(r,31),jd:l(r,31)+1};r-=186}else n-=1,r+=179,1===i.leap&&(r+=1);return{jy:n,jm:7+d(r,30),jd:l(r,30)+1}}function s(t,r,e){var n=d(1461*(t+d(r-8,6)+100100),4)+d(153*l(r+9,12)+2,5)+e-34840408;return n=n-d(3*d(t+100100+d(r-8,6),100),4)+752}function u(t){var r,e,n,a;return r=(r=4*t+139361631)+4*d(3*d(4*t+183187720,146097),4)-3908,e=5*d(l(r,1461),4)+308,n=d(l(e,153),5)+1,a=l(d(e,153),12)+1,{gy:d(r,1461)-100100+d(8-a,6),gm:a,gd:n}}function d(t,r){return~~(t/r)}function l(t,r){return t-~~(t/r)*r}const c={name:"fa",weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌_دو_سه‌_چه_پن_جم_شن".split("_"),weekdaysMin:"ی‌_د_س‌_چ_پ_ج_ش".split("_"),months:"فروردین_اردیبهشت_خرداد_تیر_مرداد_شهریور_مهر_آبان_آذر_دی_بهمن_اسفند".split("_"),monthsShort:"فرو_ارد_خرد_تیر_مرد_شهر_مهر_آبا_آذر_دی_بهم_اسف".split("_"),oridinal:t=>`${t}ام`,relativeTime:{future:"در %s",past:"%s قبل",s:"چند ثانیه",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"}},_=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])(\D?([01]\d|2[0-3])\D?([0-5]\d)\D?([0-5]\d)?\D?(\d{3})?([zZ]|([+-])([01]\d|2[0-3])\D?([0-5]\d)?)?)?$/,f=/\[.*?\]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g;return(r,e,n)=>{n.locale(c,null,!0);const a=e.prototype,i=a.format,o=a.parse;a.parse=function(r){r.date=r.date||new Date;const{date:e,jalali:n}=r;if(n&&"string"==typeof e&&/.*$/i.test(e)){const n=e.match(_);if(n){const[,e,a,i,o]=n,{gy:s,gm:u,gd:d}=t.toGregorian(Number(e),Number(a),Number(i));r.date=`${s}-${String(u).padStart(2,"0")}-${String(d).padStart(2,"0")}${o||""}`}}return o.bind(this)(r)},a.format=function(r){const e=this.$locale();if("fa"===e.name){const n=r||"YYYY-MM-DDTHH:mm:ssZ",{jy:a,jm:i,jd:o}=t.toJalaali(this.$y,this.$M+1,this.$D),s=(t,r,e,n)=>t&&t[r]||e[r].substr(0,n);r=n.replace(f,t=>{switch(t){case"YY":return String(a).slice(-2);case"YYYY":return String(a);case"M":return String(i);case"MM":return String(i).padStart(2,"0");case"MMM":return s(e.monthsShort,i-1,e.months,3);case"MMMM":return e.months[i-1];case"D":return String(o);case"DD":return String(o).padStart(2,"0");default:return t}})}return i.bind(this)(r)}}});
